{"ast":null,"code":"var _jsxFileName = \"/home/michael/blackjack/src/Game/index.js\";\nimport React from 'react';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst cardWidth = 70;\nconst cardHeight = 94;\nconst values = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'K', 'Q', 'A'];\nconst suits = ['H', 'C', 'D', 'S'];\n\nfunction Card(props) {\n  var xOffset = 0;\n  var yOffset = 0;\n\n  if ('value' in props && props.value.length === 2) {\n    xOffset = values.indexOf(props.value[0], 0) + 1;\n    yOffset = suits.indexOf(props.value[1], 0);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Card\",\n    style: {\n      backgroundImage: 'url(https://img.itch.zone/aW1hZ2UvNzE1Mzg3LzM5NjQ5MzEucG5n/original/iwG3hK.png)',\n      width: cardWidth + 'px',\n      height: cardHeight + 'px',\n      overflow: 'hidden',\n      backgroundPosition: -xOffset * cardWidth + 'px ' + -yOffset * cardHeight + 'px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 9\n  }, this);\n}\n\n_c = Card;\n\nfunction dealHand(arr, player) {\n  var out = [];\n\n  for (var i = 0; i < arr.length; i++) {\n    out.push( /*#__PURE__*/_jsxDEV(Card, {\n      value: arr[i]\n    }, (player ? 'Player' : 'Dealer') + i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 18\n    }, this));\n  }\n\n  return out;\n}\n\nfunction Hit(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: props.onClick,\n    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n      children: \"Hit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(Card, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n}\n\n_c2 = Hit;\n\nfunction Stand(props) {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    onClick: props.onClick,\n    children: [/*#__PURE__*/_jsxDEV(\"b\", {\n      children: \"Stand\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 22\n    }, this), /*#__PURE__*/_jsxDEV(Card, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n}\n\n_c3 = Stand;\n\nclass Table extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.sleep = milliseconds => {\n      return new Promise(resolve => setTimeout(resolve, milliseconds));\n    };\n\n    var deck = [...Array(52).keys()];\n    deck = this.shuffleDeck(deck);\n    this.state = {\n      deck: deck,\n      dealerHand: [],\n      playerHand: [],\n      isStanding: false,\n      dealerStanding: false\n    };\n    this.state.playerHand.push(this.getCard(this.state.deck.pop()));\n    this.state.playerHand.push(this.getCard(this.state.deck.pop()));\n    this.state.dealerHand.push(this.getCard(this.state.deck.pop()) + 'H');\n    this.state.dealerHand.push(this.getCard(this.state.deck.pop()));\n    var temp = this.state.dealerHand;\n    var dealerScore = this.calculateScore(temp, true);\n\n    if (dealerScore === 21 || this.calculateScore(this.state.playerHand, true) === 21) {\n      temp[0] = temp[0].slice(0, -1);\n      this.state.dealerHand = temp;\n      this.state.isStanding = true;\n      this.state.dealerStanding = dealerScore === 21;\n    }\n  }\n\n  shuffleDeck(arr) {\n    var shuffled = [];\n\n    while (arr.length > 0) {\n      var index = Math.floor(Math.random() * arr.length);\n      var next = arr.splice(index, 1);\n      shuffled.push(next[0]);\n    }\n\n    return shuffled;\n  }\n\n  calculateScore(arr, addHidden) {\n    var score = 0;\n    var aces = 0;\n\n    for (var i = 0; i < arr.length; i++) {\n      // Don't include hidden value\n      if (!addHidden && arr[i].length > 2) {\n        continue;\n      }\n\n      var val = arr[i][0];\n\n      if (!isNaN(val)) {\n        score += parseInt(val);\n      } else if (val !== 'A') {\n        score += 10;\n      } else {\n        aces += 1;\n      }\n    }\n\n    while (aces > 0) {\n      // Add 11 if it's the last ace and it still fits\n      if (aces === 1 && score + 11 <= 21) {\n        score += 11;\n      } else {\n        score += 1;\n      }\n\n      aces--;\n    }\n\n    return score;\n  }\n\n  getScoreString(arr) {\n    var out = '';\n    var score = this.calculateScore(arr, false);\n\n    if (score === 21) {\n      out = 'Blackjack!';\n    } else if (score > 21) {\n      out = 'Bust!';\n    } else {\n      if (arr[0].length > 2) {\n        out += '>';\n      }\n\n      out += score.toString();\n    }\n\n    return out;\n  }\n\n  getCard(cardVal) {\n    var suit = Math.floor(cardVal / 13);\n    var value = cardVal % 13;\n    var out = values[value] + suits[suit];\n    return out;\n  }\n\n  handleHit() {\n    var hand = this.state.playerHand;\n\n    if (this.state.isStanding || this.calculateScore(this.state.dealerHand, true) === 21 || this.calculateScore(hand, true) >= 21) {\n      return;\n    }\n\n    var deck = this.state.deck;\n    hand.push(this.getCard(deck.pop()));\n    var dealer = this.state.dealerHand;\n    var blackjack = this.calculateScore(hand, true) === 21;\n    var bust = this.calculateScore(hand, true) > 21;\n\n    if (this.calculateScore(hand, true) >= 21) {\n      dealer[0] = dealer[0].slice(0, 2);\n    }\n\n    this.setState({\n      deck: deck,\n      playerHand: hand,\n      dealerHand: dealer,\n      isStanding: blackjack || bust,\n      dealerStanding: bust\n    });\n  }\n\n  handleStand() {\n    if (this.state.isStanding || this.calculateScore(this.state.playerHand, false) >= 21) {\n      return;\n    }\n\n    var temp = this.state.dealerHand;\n    temp[0] = temp[0].slice(0, 2);\n    this.setState({\n      deck: this.state.deck,\n      dealerHand: temp,\n      playerHand: this.state.playerHand,\n      isStanding: true,\n      dealerStanding: this.state.dealerStanding\n    });\n  }\n\n  getStateText() {\n    var out = '';\n    var playerScore = this.calculateScore(this.state.playerHand, true);\n    var dealerScore = this.calculateScore(this.state.dealerHand, true);\n\n    if (!this.state.isStanding || !this.state.dealerStanding) {\n      return out;\n    }\n\n    if (playerScore > dealerScore) {\n      out = 'You Win!';\n    } else {\n      out = 'Dealer Wins.';\n    }\n\n    if (playerScore === 21 && dealerScore === 21) {\n      out = 'You Win!';\n    }\n\n    if (playerScore > 21) {\n      out = 'Dealer Wins.';\n    } else if (dealerScore > 21) {\n      out = 'You Win!';\n    }\n\n    return out;\n  }\n\n  hitDealer() {\n    var hand = this.state.dealerHand;\n    var deck = this.state.deck;\n\n    if (this.calculateScore(hand, true) < 17 && this.calculateScore(hand, true) < this.calculateScore(this.state.playerHand, true)) {\n      hand.push(this.getCard(deck.pop()));\n    }\n\n    var stand = this.calculateScore(hand, true) >= 17 || this.calculateScore(hand, true) >= this.calculateScore(this.state.playerHand, true);\n    this.sleep(1000).then(r => {\n      this.setState({\n        deck: deck,\n        playerHand: this.state.playerHand,\n        dealerHand: hand,\n        isStanding: this.state.isStanding,\n        dealerStanding: stand\n      });\n    });\n  }\n\n  componentDidMount() {\n    if (this.state.isStanding && !this.state.dealerStanding) {\n      this.hitDealer();\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.state.isStanding && !this.state.dealerStanding) {\n      this.hitDealer();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Hand\",\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"You: \", this.getScoreString(this.state.playerHand)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 71\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: dealHand(this.state.playerHand, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Dealer\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: dealHand(this.state.dealerHand, false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [\"Dealer: \", this.getScoreString(this.state.dealerHand)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 74\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Hit\",\n        children: /*#__PURE__*/_jsxDEV(Hit, {\n          onClick: () => this.handleHit()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Stand\",\n        children: /*#__PURE__*/_jsxDEV(Stand, {\n          onClick: () => this.handleStand()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 14\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"EndText\",\n        children: /*#__PURE__*/_jsxDEV(\"b\", {\n          children: this.getStateText()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 14\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass Game extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"Table\",\n      children: /*#__PURE__*/_jsxDEV(Table, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Game;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Card\");\n$RefreshReg$(_c2, \"Hit\");\n$RefreshReg$(_c3, \"Stand\");","map":{"version":3,"sources":["/home/michael/blackjack/src/Game/index.js"],"names":["React","cardWidth","cardHeight","values","suits","Card","props","xOffset","yOffset","value","length","indexOf","backgroundImage","width","height","overflow","backgroundPosition","dealHand","arr","player","out","i","push","Hit","onClick","Stand","Table","Component","constructor","sleep","milliseconds","Promise","resolve","setTimeout","deck","Array","keys","shuffleDeck","state","dealerHand","playerHand","isStanding","dealerStanding","getCard","pop","temp","dealerScore","calculateScore","slice","shuffled","index","Math","floor","random","next","splice","addHidden","score","aces","val","isNaN","parseInt","getScoreString","toString","cardVal","suit","handleHit","hand","dealer","blackjack","bust","setState","handleStand","getStateText","playerScore","hitDealer","stand","then","r","componentDidMount","componentDidUpdate","render","Game"],"mappings":"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","sourcesContent":["import React from 'react'\nimport './index.css';\n\nconst cardWidth = 70;\nconst cardHeight = 94;\n\nconst values = ['2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', 'K', 'Q', 'A']\nconst suits = ['H', 'C', 'D', 'S'];\n\nfunction Card(props) {\n    var xOffset = 0;\n    var yOffset = 0;\n\n    if ('value' in props && props.value.length === 2) {\n        xOffset = values.indexOf(props.value[0], 0) + 1;\n        yOffset = suits.indexOf(props.value[1], 0);\n    }\n    \n    return (\n        <div\n         className='Card'\n         style={{backgroundImage: 'url(https://img.itch.zone/aW1hZ2UvNzE1Mzg3LzM5NjQ5MzEucG5n/original/iwG3hK.png)',\n                 width: cardWidth + 'px',\n                 height: cardHeight + 'px',\n                 overflow: 'hidden',\n                 backgroundPosition: -xOffset * cardWidth + 'px ' + -yOffset * cardHeight + 'px'\n               }}\n        />\n    );\n}\n\nfunction dealHand(arr, player) {\n    var out = [];\n    for (var i = 0; i < arr.length; i++) {\n        out.push(<Card key={(player ? 'Player' : 'Dealer') + i} value={arr[i]} />);\n    }\n    return (out);\n}\n\nfunction Hit(props) {\n    return (\n        <div onClick={props.onClick}>\n         <b>Hit</b><br />\n         <Card />\n        </div>\n    );\n}\n\nfunction Stand(props) {\n    return (\n        <div onClick={props.onClick}>\n         <b>Stand</b><br />\n         <Card />\n        </div>\n    );\n}\n\nclass Table extends React.Component {\n    constructor(props) {\n        super(props);\n        \n        var deck = [...Array(52).keys()]\n        deck = this.shuffleDeck(deck);\n        this.state = {\n            deck: deck,\n            dealerHand: [],\n            playerHand: [],\n            isStanding: false,\n            dealerStanding: false,\n        };\n\n        this.state.playerHand.push(this.getCard(this.state.deck.pop()));\n        this.state.playerHand.push(this.getCard(this.state.deck.pop()));\n        \n        this.state.dealerHand.push(this.getCard(this.state.deck.pop()) + 'H');\n        this.state.dealerHand.push(this.getCard(this.state.deck.pop()));\n\n        var temp = this.state.dealerHand;\n        var dealerScore = this.calculateScore(temp, true);\n        if (dealerScore === 21 || this.calculateScore(this.state.playerHand, true) === 21) {\n            temp[0] = temp[0].slice(0,-1);\n            this.state.dealerHand = temp;\n            this.state.isStanding = true;\n            this.state.dealerStanding = dealerScore === 21;\n        }\n    }\n\n    shuffleDeck(arr) {\n        var shuffled = [];\n\n        while (arr.length > 0) {\n            var index = Math.floor(Math.random() * arr.length);\n            var next = arr.splice(index, 1);\n            shuffled.push(next[0]);\n        }\n        return shuffled;\n    }\n\n    calculateScore(arr, addHidden) {\n        var score = 0;\n        var aces = 0;\n        for (var i = 0; i < arr.length; i++) {\n            // Don't include hidden value\n            if (!addHidden && arr[i].length > 2) {\n                continue;\n            }\n            var val = arr[i][0];\n            if (!isNaN(val)) {\n                score += parseInt(val);\n            } \n            else if (val !== 'A') {\n                score += 10;\n            }\n            else {\n                aces += 1\n            }\n\n        }\n\n        while (aces > 0) {\n            // Add 11 if it's the last ace and it still fits\n            if (aces === 1 && (score + 11) <= 21) {\n                score += 11;\n            }\n            else {\n                score += 1;\n            }\n            aces--;\n        }\n\n        return score;\n    }\n\n    getScoreString(arr) {\n        var out = '';\n        var score = this.calculateScore(arr, false);\n\n        if (score === 21) {\n            out = 'Blackjack!';\n        }\n        else if (score > 21) {\n            out = 'Bust!'\n        }\n        else {\n            if (arr[0].length > 2) {\n                out += '>';\n            }\n            out += score.toString();\n        }\n        return out;\n    }\n\n    getCard(cardVal) {\n        var suit = Math.floor(cardVal / 13);\n        var value = cardVal % 13;\n        var out = values[value] + suits[suit]\n        return out;\n    }\n\n    handleHit() {\n        var hand = this.state.playerHand;\n        if (this.state.isStanding ||\n            this.calculateScore(this.state.dealerHand, true) === 21 ||\n            this.calculateScore(hand, true) >= 21) {\n            return;\n        }\n\n        var deck = this.state.deck;\n        hand.push(this.getCard(deck.pop()));\n\n        var dealer = this.state.dealerHand;\n        var blackjack = this.calculateScore(hand, true) === 21;\n        var bust = this.calculateScore(hand, true) > 21;\n        if (this.calculateScore(hand, true) >= 21) {\n            dealer[0] = dealer[0].slice(0, 2);\n        }\n        this.setState({\n            deck: deck,\n            playerHand: hand,\n            dealerHand: dealer,\n            isStanding: blackjack || bust,\n            dealerStanding: bust,\n        });\n    }\n\n    handleStand() {\n        if (this.state.isStanding ||\n            this.calculateScore(this.state.playerHand, false) >= 21) {\n            return;\n        }\n        var temp = this.state.dealerHand;\n        temp[0] = temp[0].slice(0, 2);\n        this.setState({                        \n            deck: this.state.deck,                        \n            dealerHand: temp, \n            playerHand: this.state.playerHand, \n            isStanding: true, \n            dealerStanding: this.state.dealerStanding,\n        });                                    \n    }\n\n    getStateText() {\n        var out = '';\n\n        var playerScore = this.calculateScore(this.state.playerHand, true);\n        var dealerScore = this.calculateScore(this.state.dealerHand, true);\n\n        if (!this.state.isStanding || !this.state.dealerStanding) {\n            return out;\n        }\n        if (playerScore > dealerScore) {\n            out = 'You Win!';\n        }\n        else {\n            out = 'Dealer Wins.';\n        }\n\n        if (playerScore === 21 && dealerScore === 21) {\n            out = 'You Win!';\n        }\n\n        if (playerScore > 21) {\n            out = 'Dealer Wins.';\n        }\n        else if (dealerScore > 21) {\n            out = 'You Win!';\n        }\n\n        return out;\n    }\n\n    sleep = (milliseconds) => {\n        return new Promise(resolve => setTimeout(resolve, milliseconds))\n    }\n\n    hitDealer() {\n        var hand = this.state.dealerHand;\n        var deck = this.state.deck;\n        if (this.calculateScore(hand, true) < 17 &&\n            this.calculateScore(hand, true) < this.calculateScore(this.state.playerHand, true)) {\n            hand.push(this.getCard(deck.pop()));\n        }\n        var stand = this.calculateScore(hand, true) >= 17 ||\n                    this.calculateScore(hand, true) >= this.calculateScore(this.state.playerHand, true);\n        this.sleep(1000).then(r => {\n            this.setState({\n                deck: deck,\n                playerHand: this.state.playerHand,\n                dealerHand: hand,\n                isStanding: this.state.isStanding,\n                dealerStanding: stand,\n            });\n        });\n    }\n\n    componentDidMount() {\n        if (this.state.isStanding && !this.state.dealerStanding) {\n            this.hitDealer();\n        }\n    }\n\n    componentDidUpdate() {\n        if (this.state.isStanding && !this.state.dealerStanding) {\n            this.hitDealer();\n        }\n    }\n\n    render() {\n        return (\n            <div>\n             <div className='Hand'>\n              <b>You: {this.getScoreString(this.state.playerHand)}</b><br />\n              <div>\n               {dealHand(this.state.playerHand, true)}\n              </div>\n             </div>\n             <div className='Dealer'>\n              <div>\n               {dealHand(this.state.dealerHand, false)}\n              </div>\n              <b>Dealer: {this.getScoreString(this.state.dealerHand)}</b><br />\n             </div>\n             <div className='Hit'>\n              <Hit onClick={() => this.handleHit()} />\n             </div>\n             <div className='Stand'>\n              <Stand  onClick={() => this.handleStand()} />\n             </div>\n             <div className='EndText'>\n              <b>{this.getStateText()}</b>\n             </div>\n            </div>\n        );\n    }\n}\n\nclass Game extends React.Component {\n    render() {\n        return (\n            <div className='Table'>\n             <Table />\n            </div>\n        );\n    }\n}\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}